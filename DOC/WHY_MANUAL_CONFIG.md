# 为什么需要手动配置文件列表？

## 问题

您可能会疑惑：为什么在 `context/` 目录中添加新文件后，刷新页面不会自动显示？为什么必须在 `config.js` 中手动注册？

## 原因

### 1. 浏览器安全限制

出于安全考虑，**浏览器中的 JavaScript 无法直接读取本地文件系统的目录结构**。

- ❌ 无法列出目录中的所有文件
- ❌ 无法扫描文件夹
- ✅ 只能读取已知路径的特定文件

这是所有现代浏览器的安全策略，无法绕过。

### 2. 静态网站的限制

这是一个**纯静态网站**，没有后端服务器：

- **动态网站**（如 WordPress、Node.js 应用）：后端可以扫描目录，生成文件列表
- **静态网站**（如本项目）：只有前端 JavaScript，无法访问文件系统

### 3. 设计权衡

虽然手动配置需要额外步骤，但这样设计有几个优点：

#### ✅ 优点

1. **完全控制**：
   - 可以自定义文件的显示顺序
   - 可以为每个文件添加自定义描述
   - 可以使用更友好的显示名称（与文件名不同）
   - 可以选择性地显示/隐藏某些文件

2. **更好的性能**：
   - 只加载配置中列出的文件
   - 避免加载临时文件、备份文件等

3. **简单部署**：
   - 无需服务器端代码
   - 可以部署到任何静态托管服务
   - 免费托管选项多（GitHub Pages、Netlify 等）

#### ❌ 缺点

1. 每次添加新文件都需要更新 `config.js`
2. 容易忘记注册新文件

## 解决方案建议

### 方案 1：保持现状（推荐）

适合文章数量不太多的个人博客。

**步骤**：
1. 创建 `.txt` 文件
2. 更新 `config.js`
3. 刷新浏览器

### 方案 2：添加后端服务（高级）

如果您需要自动扫描功能，可以：

1. **使用 Node.js 后端**：
   ```javascript
   // 示例：自动扫描目录
   const fs = require('fs');
   const files = fs.readdirSync('./context/tech/');
   ```

2. **生成配置脚本**：
   创建一个脚本自动生成 `config.js`
   ```bash
   # generate-config.js
   node generate-config.js  # 扫描目录并生成配置
   ```

3. **使用构建工具**：
   使用 Webpack、Vite 等工具在构建时自动生成配置

### 方案 3：使用 GitHub Actions 自动化

如果部署在 GitHub Pages：

1. 添加文件到 `context/` 目录
2. Push 到 GitHub
3. GitHub Actions 自动运行脚本生成配置
4. 自动部署更新

## 快速参考：添加新文章

```bash
# 1. 创建文件
echo "文章内容" > context/tech/新文章.txt

# 2. 编辑 config.js，添加：
{
    id: 'unique-id',
    name: '显示名称',
    filename: '新文章.txt',
    description: '文章描述'
}

# 3. 刷新浏览器
```

## 常见错误

### ❌ 只添加文件，不更新配置
**结果**：文件不会显示

### ❌ 配置的文件名与实际文件名不一致
**结果**：显示"加载失败"错误

### ❌ 忘记在文件列表末尾添加逗号
**结果**：JavaScript 语法错误

## 总结

手动配置是静态网站的必然限制，但也提供了更多的控制和灵活性。如果您需要完全自动化的体验，建议考虑使用动态博客系统（如 WordPress、Hugo、Hexo 等）。

---

**记住**：每次添加新文章，都需要两个步骤：
1. ✍️ 创建文件
2. ⚙️ 更新 `config.js`

